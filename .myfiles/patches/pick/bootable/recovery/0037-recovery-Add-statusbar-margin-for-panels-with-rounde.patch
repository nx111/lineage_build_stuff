From 56fbaa74d363bc11abc4ead928fc75d6cc04810d Mon Sep 17 00:00:00 2001
From: Tom Marshall <tdm.code@gmail.com>
Date: Tue, 6 Mar 2018 20:32:45 +0100
Subject: [PATCH 37/44] recovery: Add statusbar margin for panels with rounded
 corners

Change-Id: Ib81ee2be69e1e0e03f70b3348a7a855c6760c5f3
---
 Android.mk    | 6 ++++++
 screen_ui.cpp | 2 +-
 2 files changed, 7 insertions(+), 1 deletion(-)

diff --git a/Android.mk b/Android.mk
index a1851fa7..f66860b1 100644
--- a/Android.mk
+++ b/Android.mk
@@ -106,6 +106,12 @@ else
 LOCAL_CFLAGS += -DRECOVERY_UI_MARGIN_WIDTH=0
 endif
 
+ifneq ($(TARGET_RECOVERY_UI_MARGIN_STATUSBAR),)
+LOCAL_CFLAGS += -DRECOVERY_UI_MARGIN_STATUSBAR=$(TARGET_RECOVERY_UI_MARGIN_STATUSBAR)
+else
+LOCAL_CFLAGS += -DRECOVERY_UI_MARGIN_STATUSBAR=0
+endif
+
 ifneq ($(TARGET_RECOVERY_UI_TOUCH_LOW_THRESHOLD),)
 LOCAL_CFLAGS += -DRECOVERY_UI_TOUCH_LOW_THRESHOLD=$(TARGET_RECOVERY_UI_TOUCH_LOW_THRESHOLD)
 else
diff --git a/screen_ui.cpp b/screen_ui.cpp
index e24dafb7..ce9e5ae3 100644
--- a/screen_ui.cpp
+++ b/screen_ui.cpp
@@ -526,7 +526,7 @@ void ScreenRecoveryUI::draw_statusbar_locked() {
 
   // Time
   SetColor(STATUSBAR);
-  x = gr_fb_width();
+  x = gr_fb_width() - RECOVERY_UI_MARGIN_STATUSBAR;
   x -= 5 * char_width_;
   gr_text(gr_sys_font(), x, y, localtm_str, false);
 
-- 
2.17.1

