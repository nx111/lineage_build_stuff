From 521c42113b4c2cb61dd666bc2bc1504ea0815ea1 Mon Sep 17 00:00:00 2001
From: Tom Marshall <tdm.code@gmail.com>
Date: Thu, 17 Jan 2019 16:21:01 -0800
Subject: [PATCH 44/44] recovery: Add resize2fs, tune2fs to fstools

Change-Id: Ia8988dcce72601d4baf02596d3ff487f6aea26c6
---
 Android.mk      | 3 +++
 recovery.cpp    | 2 ++
 recovery_cmds.h | 2 ++
 3 files changed, 7 insertions(+)

diff --git a/Android.mk b/Android.mk
index bf65f53e..1a0827a3 100644
--- a/Android.mk
+++ b/Android.mk
@@ -221,6 +221,8 @@ LOCAL_WHOLE_STATIC_LIBRARIES += \
     libext2fs \
     libe2fsck \
     libmke2fs \
+    libresize2fs \
+    libtune2fs \
     libsparse
 
 LOCAL_WHOLE_STATIC_LIBRARIES += \
@@ -263,6 +265,7 @@ LOCAL_STATIC_LIBRARIES += \
 FILESYSTEM_TOOLS := \
     e2fsdroid e2fsdroid_static \
     e2fsck mke2fs mke2fs_static fsck.ext4 mkfs.ext4 \
+    resize2fs tune2fs \
     mkfs.f2fs fsck.f2fs sload.f2fs \
     fsck_msdos \
     fsck.exfat mkfs.exfat \
diff --git a/recovery.cpp b/recovery.cpp
index f654efe2..9f076ade 100644
--- a/recovery.cpp
+++ b/recovery.cpp
@@ -107,6 +107,8 @@ static const struct recovery_cmd recovery_cmds[] = {
   { "e2fsck",         e2fsck_main },
   { "fsck.ext4",      e2fsck_main },
   { "mkfs.ext4",      mke2fs_main },
+  { "resize2fs",      resize2fs_main },
+  { "tune2fs",        tune2fs_main },
 
   { "mkfs.f2fs",      mkfs_f2fs_main },
   { "fsck.f2fs",      fsck_f2fs_main },
diff --git a/recovery_cmds.h b/recovery_cmds.h
index 770e4083..5240b5e3 100644
--- a/recovery_cmds.h
+++ b/recovery_cmds.h
@@ -36,6 +36,8 @@ int e2fsdroid_main(int argc, char **argv);
 
 int mke2fs_main(int argc, char **argv);
 int e2fsck_main(int argc, char **argv);
+int resize2fs_main(int argc, char **argv);
+int tune2fs_main(int argc, char **argv);
 
 int mkfs_f2fs_main(int argc, char **argv);
 int fsck_f2fs_main(int argc, char **argv);
-- 
2.17.1

