From 9c32d9810a0fc83577412d0b578497a7c28eeae7 Mon Sep 17 00:00:00 2001
From: Scott Warner <Tortel1210@gmail.com>
Date: Sun, 27 Jan 2019 13:08:39 -0500
Subject: [PATCH 09/17] Settings: Add null checks for OemLockService

Change-Id: If5e5595b3fe9d5092227ff4f61612091870f4b7a
---
 .../development/OemUnlockPreferenceController.java        | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

diff --git a/src/com/android/settings/development/OemUnlockPreferenceController.java b/src/com/android/settings/development/OemUnlockPreferenceController.java
index fdec27e396..a94b4d5834 100644
--- a/src/com/android/settings/development/OemUnlockPreferenceController.java
+++ b/src/com/android/settings/development/OemUnlockPreferenceController.java
@@ -182,7 +182,7 @@ public class OemUnlockPreferenceController extends DeveloperOptionsPreferenceCon
      */
     @VisibleForTesting
     boolean isBootloaderUnlocked() {
-        return mOemLockManager.isDeviceOemUnlocked();
+        return mOemLockManager != null && mOemLockManager.isDeviceOemUnlocked();
     }
 
     private boolean enableOemUnlockPreference() {
@@ -209,14 +209,14 @@ public class OemUnlockPreferenceController extends DeveloperOptionsPreferenceCon
     @VisibleForTesting
     boolean isOemUnlockAllowedByUserAndCarrier() {
         final UserHandle userHandle = UserHandle.of(UserHandle.myUserId());
-        return mOemLockManager.isOemUnlockAllowedByCarrier()
+        return mOemLockManager == null || (mOemLockManager.isOemUnlockAllowedByCarrier()
                 && !mUserManager.hasBaseUserRestriction(UserManager.DISALLOW_FACTORY_RESET,
-                userHandle);
+                userHandle));
     }
 
     @VisibleForTesting
     boolean isOemUnlockedAllowed() {
-        return mOemLockManager.isOemUnlockAllowed();
+        return mOemLockManager != null && mOemLockManager.isOemUnlockAllowed();
     }
 
 }
-- 
2.17.1

