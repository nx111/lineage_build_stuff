From 9f503013f5477f51e4c2907355437b0612d720da Mon Sep 17 00:00:00 2001
From: Han Wang <416810799@qq.com>
Date: Mon, 3 Jun 2019 13:09:49 +0200
Subject: [PATCH 2/4] LiveDisplaySettings: Reset preferences before hiding them
 from UI

 * Otherwise the hidden features may be kept activated indefinitely.

Change-Id: I903c63090a9c776beb98a3338083045cc17c63d6
---
 .../lineageos/lineageparts/livedisplay/LiveDisplaySettings.java | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/src/org/lineageos/lineageparts/livedisplay/LiveDisplaySettings.java b/src/org/lineageos/lineageparts/livedisplay/LiveDisplaySettings.java
index 7205a51..c655e5a 100644
--- a/src/org/lineageos/lineageparts/livedisplay/LiveDisplaySettings.java
+++ b/src/org/lineageos/lineageparts/livedisplay/LiveDisplaySettings.java
@@ -172,6 +172,8 @@ public class LiveDisplaySettings extends SettingsPreferenceFragment implements S
 
         mDisplayTemperature = (DisplayTemperature) findPreference(KEY_LIVE_DISPLAY_TEMPERATURE);
         if (ColorDisplayController.isAvailable(getContext())) {
+            mLiveDisplay.setValue(String.valueOf(MODE_OFF));
+            mDisplayTemperature.setEnabled(false);
             liveDisplayPrefs.removePreference(mLiveDisplay);
             liveDisplayPrefs.removePreference(mDisplayTemperature);
         }
-- 
2.17.1

