From a40f25181897b91632c72b50713e0757562a6a4a Mon Sep 17 00:00:00 2001
From: Michael Bestas <mkbestas@lineageos.org>
Date: Mon, 25 Feb 2019 20:16:23 +0200
Subject: [PATCH] bash: Silence all build warnings

Change-Id: Ic7397ba6c32c3dadc530b0164ca11a89a478042a
---
 Android.mk              | 17 ++++++++++++++++-
 builtins/Android.mk     | 11 ++++++++++-
 lib/glob/Android.mk     |  6 +++++-
 lib/readline/Android.mk | 17 +++++++++++++++--
 lib/sh/Android.mk       |  8 +++++++-
 5 files changed, 53 insertions(+), 6 deletions(-)

diff --git a/Android.mk b/Android.mk
index cda7f49..e0880f6 100644
--- a/Android.mk
+++ b/Android.mk
@@ -37,7 +37,22 @@ LOCAL_STATIC_LIBRARIES += \
 	libhistory \
 	libreadline
 LOCAL_CFLAGS += \
-	-Wno-error
+	-Wno-char-subscripts \
+	-Wno-format \
+	-Wno-implicit-function-declaration \
+	-Wno-incompatible-pointer-types \
+	-Wno-incompatible-pointer-types-discards-qualifiers \
+	-Wno-missing-field-initializers \
+	-Wno-non-literal-null-conversion \
+	-Wno-parentheses \
+	-Wno-sign-compare \
+	-Wno-sometimes-uninitialized \
+	-Wno-switch \
+	-Wno-unused-function \
+	-Wno-unused-label \
+	-Wno-unused-parameter \
+	-Wno-unused-variable \
+	-Wno-user-defined-warnings
 
 LOCAL_MODULE := bash
 LOCAL_MODULE_PATH := $(TARGET_OUT_OPTIONAL_EXECUTABLES)
diff --git a/builtins/Android.mk b/builtins/Android.mk
index 31932c9..21ca281 100644
--- a/builtins/Android.mk
+++ b/builtins/Android.mk
@@ -65,7 +65,16 @@ LOCAL_CFLAGS += \
 	-DCONF_OSTYPE=\"android-eabi\" \
 	-DCONF_MACHTYPE=\"arm-android-eabi\" \
 	-DCONF_VENDOR=\"unknown\"
-LOCAL_CFLAGS += -Wno-error
+LOCAL_CFLAGS += \
+	-Wno-implicit-function-declaration \
+	-Wno-incompatible-pointer-types-discards-qualifiers \
+	-Wno-knr-promoted-parameter \
+	-Wno-parentheses \
+	-Wno-sign-compare \
+	-Wno-unused-function \
+	-Wno-unused-parameter \
+	-Wno-unused-variable
+
 LOCAL_MODULE_TAGS := eng
 LOCAL_MODULE := libbuiltins
 include $(BUILD_STATIC_LIBRARY)
diff --git a/lib/glob/Android.mk b/lib/glob/Android.mk
index a7e6ba0..98ff525 100644
--- a/lib/glob/Android.mk
+++ b/lib/glob/Android.mk
@@ -20,7 +20,11 @@ LOCAL_C_INCLUDES += \
 LOCAL_CFLAGS += \
 	-DHAVE_CONFIG_H
 
-LOCAL_CFLAGS += -Wno-error
+LOCAL_CFLAGS += \
+	-Wno-parentheses \
+	-Wno-sign-compare \
+	-Wno-unused-parameter \
+	-Wno-unused-variable
 
 LOCAL_MODULE_TAGS := eng
 
diff --git a/lib/readline/Android.mk b/lib/readline/Android.mk
index 05bef25..3120580 100644
--- a/lib/readline/Android.mk
+++ b/lib/readline/Android.mk
@@ -23,7 +23,12 @@ LOCAL_C_INCLUDES += \
 LOCAL_CFLAGS += \
 	-DHAVE_CONFIG_H
 
-LOCAL_CFLAGS += -Wno-error
+LOCAL_CFLAGS += \
+	-Wno-incompatible-pointer-types-discards-qualifiers \
+	-Wno-parentheses \
+	-Wno-sign-compare \
+	-Wno-unused-variable \
+	-Wno-user-defined-warnings
 
 LOCAL_MODULE := libhistory
 
@@ -80,7 +85,15 @@ LOCAL_C_INCLUDES += \
 LOCAL_CFLAGS += \
 	-DHAVE_CONFIG_H
 
-LOCAL_CFLAGS += -Wno-error -Wno-unused-parameter
+LOCAL_CFLAGS += \
+	-Wno-incompatible-pointer-types-discards-qualifiers \
+	-Wno-missing-braces \
+	-Wno-parentheses \
+	-Wno-sign-compare \
+	-Wno-unused-function \
+	-Wno-unused-parameter \
+	-Wno-unused-variable \
+	-Wno-user-defined-warnings
 
 LOCAL_MODULE := libreadline
 
diff --git a/lib/sh/Android.mk b/lib/sh/Android.mk
index 9d34fac..192a621 100644
--- a/lib/sh/Android.mk
+++ b/lib/sh/Android.mk
@@ -26,7 +26,13 @@ LOCAL_C_INCLUDES += \
 LOCAL_CFLAGS += \
 	-DHAVE_CONFIG_H
 
-LOCAL_CFLAGS += -Wno-error
+LOCAL_CFLAGS += \
+	-Wno-missing-braces \
+	-Wno-parentheses \
+	-Wno-sign-compare \
+	-Wno-unused-function \
+	-Wno-unused-parameter \
+	-Wno-unused-variable
 
 LOCAL_MODULE := libsh
 
-- 
2.17.1

