From 2318b6c24d14a43a260a61811ea07dd477d46357 Mon Sep 17 00:00:00 2001
From: Michael Bestas <mkbestas@lineageos.org>
Date: Tue, 12 Feb 2019 19:39:46 +0200
Subject: [PATCH 02/15] Label adb.network.port as system_prop

Change-Id: I59c8a4413cc48ffc665627a7dcb4583327f1bc59
---
 common/private/property.te       | 1 -
 common/private/property_contexts | 2 +-
 common/private/system_server.te  | 3 ---
 3 files changed, 1 insertion(+), 5 deletions(-)

diff --git a/common/private/property.te b/common/private/property.te
index b6577fe..132ae92 100644
--- a/common/private/property.te
+++ b/common/private/property.te
@@ -1,3 +1,2 @@
-type adbtcp_prop, property_type;
 type lineage_recovery_prop, property_type;
 type userinit_prop, property_type;
diff --git a/common/private/property_contexts b/common/private/property_contexts
index 20698a0..cfb6d9e 100644
--- a/common/private/property_contexts
+++ b/common/private/property_contexts
@@ -1,4 +1,4 @@
-adb.network.port              u:object_r:adbtcp_prop:s0
+adb.network.port              u:object_r:system_prop:s0
 lineage.service.adb.root      u:object_r:system_prop:s0
 lineage.userinit.active       u:object_r:userinit_prop:s0
 recovery.perf.mode            u:object_r:lineage_recovery_prop:s0
diff --git a/common/private/system_server.te b/common/private/system_server.te
index 068af84..05f75fa 100644
--- a/common/private/system_server.te
+++ b/common/private/system_server.te
@@ -3,9 +3,6 @@ allow system_server storage_stub_file:dir getattr;
 # Allow LineageHW (running as system server) to access LiveDisplay tuneables
 allow system_server sysfs_livedisplay_tuneable:file rw_file_perms;
 
-# Allow adb related properties to be set
-set_prop(system_server, adbtcp_prop)
-
 # Use HALs
 hal_client_domain(system_server, hal_lineage_livedisplay)
 hal_client_domain(system_server, hal_lineage_touch)
-- 
2.17.1

