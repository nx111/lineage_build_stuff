From 6052ea2059828c89a35ed23c52d3c2b613c7ace6 Mon Sep 17 00:00:00 2001
From: dianlujitao <dianlujitao@lineageos.org>
Date: Fri, 1 Mar 2019 14:43:33 +0800
Subject: [PATCH 09/10] Allow Gallery to access system_app_data_file

Change-Id: Ia358def04eb2491c25dadc7ff93afbb06405eea0
---
 common/private/gallery_app.te | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/common/private/gallery_app.te b/common/private/gallery_app.te
index 436e93f..ef2d331 100644
--- a/common/private/gallery_app.te
+++ b/common/private/gallery_app.te
@@ -20,3 +20,8 @@ allow gallery_app hidl_token_hwservice:hwservice_manager find;
 # Allow to read and execute camera app modules
 typeattribute gallery_app system_executes_vendor_violators;
 allow gallery_app vendor_file:file { rx_file_perms };
+
+# Read and write system app data files passed over Binder.
+# Motivating case was /data/data/com.android.settings/cache/*.jpg for
+# cropping or taking user photos.
+allow gallery_app system_app_data_file:file { read write getattr };
-- 
2.17.1

