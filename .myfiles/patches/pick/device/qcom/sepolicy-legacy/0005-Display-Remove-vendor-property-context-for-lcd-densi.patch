From e8957c9386233dacb38e6e7bc55e61e95a941fb4 Mon Sep 17 00:00:00 2001
From: Anjaneya Prasad Musunuri <aprasad@codeaurora.org>
Date: Wed, 6 Jun 2018 16:48:26 +0530
Subject: [PATCH 5/6] Display: Remove vendor property context for lcd density

Change-Id: I37ecf245e2db3b813bd7a97db2ecd43d9a6a62c8
CRs-Fixed: 2251892
---
 common/app.te            | 3 ---
 common/init_shell.te     | 1 -
 common/surfaceflinger.te | 1 -
 common/zygote.te         | 1 -
 4 files changed, 6 deletions(-)

diff --git a/common/app.te b/common/app.te
index f3ef11d..d761f2a 100644
--- a/common/app.te
+++ b/common/app.te
@@ -24,8 +24,5 @@ allow appdomain bservice_prop:file r_file_perms;
 allow appdomain reschedule_service_prop:file r_file_perms;
 allow appdomain debug_gralloc_prop:file r_file_perms;
 
-#most of apps/UI try to read this prop
-get_prop(appdomain, sf_lcd_density_prop)
-
 # Allow apps to read graphics vulkan property
 allow appdomain graphics_vulkan_prop:file r_file_perms;
diff --git a/common/init_shell.te b/common/init_shell.te
index efc6fbe..616a561 100644
--- a/common/init_shell.te
+++ b/common/init_shell.te
@@ -84,7 +84,6 @@ set_prop(qti_init_shell, ctl_qmuxd_prop)
 set_prop(qti_init_shell, ctl_netmgrd_prop)
 set_prop(qti_init_shell, ctl_port-bridge_prop)
 set_prop(qti_init_shell, sdm_idle_time_prop)
-set_prop(qti_init_shell, sf_lcd_density_prop)
 set_prop(qti_init_shell, dalvik_prop)
 set_prop(qti_init_shell, scr_enabled_prop)
 set_prop(qti_init_shell, opengles_prop)
diff --git a/common/surfaceflinger.te b/common/surfaceflinger.te
index a9f7891..e4ade6c 100644
--- a/common/surfaceflinger.te
+++ b/common/surfaceflinger.te
@@ -43,7 +43,6 @@ userdebug_or_eng(`
 allow surfaceflinger {
     debug_gralloc_prop
     sdm_idle_time_prop
-    sf_lcd_density_prop
 }:file r_file_perms;
 
 #set qemu.gles prop
diff --git a/common/zygote.te b/common/zygote.te
index 6c9873b..ad02d77 100644
--- a/common/zygote.te
+++ b/common/zygote.te
@@ -26,7 +26,6 @@
 # IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 
 allow zygote debug_gralloc_prop:file r_file_perms;
-allow zygote sf_lcd_density_prop:file r_file_perms;
 # persist.service.bdroid.bdaddr hw.cabl.level
 #set_prop(zygote, bluetooth_prop)
 set_prop(zygote, ppd_prop)
-- 
2.17.1

