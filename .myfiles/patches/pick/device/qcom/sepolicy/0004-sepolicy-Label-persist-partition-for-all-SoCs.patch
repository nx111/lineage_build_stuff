From d386debec277628b924cc93ab1b6b28f218c199a Mon Sep 17 00:00:00 2001
From: Michael Bestas <mkbestas@lineageos.org>
Date: Sun, 3 Mar 2019 00:59:38 +0200
Subject: [PATCH 4/6] sepolicy: Label persist partition for all SoCs

Change-Id: I8db3acb9a1b958ec59c7f14c6ee16ea466548cc7
---
 vendor/apq8098_latv/file_contexts | 1 +
 vendor/msm8909/file_contexts      | 2 ++
 vendor/msm8937/file_contexts      | 3 +--
 vendor/msm8953/file_contexts      | 1 +
 vendor/msm8998/file_contexts      | 1 +
 vendor/msmpeafowl/file_contexts   | 1 +
 vendor/msmskunk/file_contexts     | 1 +
 vendor/qcs605/file_contexts       | 2 ++
 vendor/sdm710/file_contexts       | 2 ++
 9 files changed, 12 insertions(+), 2 deletions(-)

diff --git a/vendor/apq8098_latv/file_contexts b/vendor/apq8098_latv/file_contexts
index ee995865..7b01eddd 100644
--- a/vendor/apq8098_latv/file_contexts
+++ b/vendor/apq8098_latv/file_contexts
@@ -45,6 +45,7 @@
 /dev/block/platform/soc/1da4000.ufshc/by-name/frp                                u:object_r:frp_block_device:s0
 /dev/block/platform/soc/1da4000.ufshc/by-name/mdtp                               u:object_r:mdtp_device:s0
 /dev/block/platform/soc/1da4000.ufshc/by-name/mdtpsecapp                         u:object_r:mdtp_device:s0
+/dev/block/platform/soc/1da4000.ufshc/by-name/persist                            u:object_r:persist_block_device:s0
 
 #rawdump partition
 /dev/block/platform/soc/1da4000.ufshc/by-name/rawdump                            u:object_r:rawdump_block_device:s0
diff --git a/vendor/msm8909/file_contexts b/vendor/msm8909/file_contexts
index 79b8fec2..46fe5571 100644
--- a/vendor/msm8909/file_contexts
+++ b/vendor/msm8909/file_contexts
@@ -40,6 +40,7 @@
 /dev/block/platform/soc.0/7824900.sdhci/by-name/userdata              u:object_r:userdata_block_device:s0
 /dev/block/platform/soc.0/7824900.sdhci/by-name/logdump               u:object_r:logdump_partition:s0
 /dev/block/platform/soc.0/7824900.sdhci/by-name/config                u:object_r:frp_block_device:s0
+/dev/block/platform/soc.0/7824900.sdhci/by-name/persist               u:object_r:persist_block_device:s0
 /dev/block/mmcblk0                                                    u:object_r:root_block_device:s0
 /dev/block/mmcblk0rpmb                                                u:object_r:rpmb_device:s0
 
@@ -52,6 +53,7 @@
 /dev/block/platform/soc/7824900.sdhci/by-name/misc                  u:object_r:misc_block_device:s0
 /dev/block/platform/soc/7824900.sdhci/by-name/userdata              u:object_r:userdata_block_device:s0
 /dev/block/platform/soc/7824900.sdhci/by-name/logdump               u:object_r:logdump_partition:s0
+/dev/block/platform/soc/7824900.sdhci/by-name/persist               u:object_r:persist_block_device:s0
 
 #For adreno libs
 /(vendor|system/vendor)/lib(64)?/libsc-a3xx\.so                     u:object_r:same_process_hal_file:s0
diff --git a/vendor/msm8937/file_contexts b/vendor/msm8937/file_contexts
index 3315ad04..63e02039 100644
--- a/vendor/msm8937/file_contexts
+++ b/vendor/msm8937/file_contexts
@@ -48,8 +48,7 @@
 /dev/block/platform/soc/7824900.sdhci/by-name/recovery              u:object_r:recovery_block_device:s0
 /dev/block/platform/soc/7824900.sdhci/by-name/cache                 u:object_r:cache_block_device:s0
 /dev/block/platform/soc/7824900.sdhci/by-name/logdump               u:object_r:logdump_partition:s0
-
-
+/dev/block/platform/soc/7824900.sdhci/by-name/persist               u:object_r:persist_block_device:s0
 
 #rawdump partition
 /dev/block/platform/soc/7824900.sdhci/by-name/rawdump               u:object_r:rawdump_block_device:s0
diff --git a/vendor/msm8953/file_contexts b/vendor/msm8953/file_contexts
index fd1f8d48..9e36fccf 100644
--- a/vendor/msm8953/file_contexts
+++ b/vendor/msm8953/file_contexts
@@ -48,6 +48,7 @@
 /dev/block/platform/soc/7824900.sdhci/by-name/boot                  u:object_r:boot_block_device:s0
 /dev/block/platform/soc/7824900.sdhci/by-name/recovery              u:object_r:recovery_block_device:s0
 /dev/block/platform/soc/7824900.sdhci/by-name/cache                 u:object_r:cache_block_device:s0
+/dev/block/platform/soc/7824900.sdhci/by-name/persist               u:object_r:persist_block_device:s0
 
 #rawdump partition
 /dev/block/platform/soc/7824900.sdhci/by-name/rawdump               u:object_r:rawdump_block_device:s0
diff --git a/vendor/msm8998/file_contexts b/vendor/msm8998/file_contexts
index ae03eb25..636b495b 100644
--- a/vendor/msm8998/file_contexts
+++ b/vendor/msm8998/file_contexts
@@ -45,6 +45,7 @@
 /dev/block/platform/soc/1da4000.ufshc/by-name/frp                                u:object_r:frp_block_device:s0
 /dev/block/platform/soc/1da4000.ufshc/by-name/mdtp                               u:object_r:mdtp_device:s0
 /dev/block/platform/soc/1da4000.ufshc/by-name/mdtpsecapp                         u:object_r:mdtp_device:s0
+/dev/block/platform/soc/1da4000.ufshc/by-name/persist                            u:object_r:persist_block_device:s0
 
 #rawdump partition
 /dev/block/platform/soc/1da4000.ufshc/by-name/rawdump                            u:object_r:rawdump_block_device:s0
diff --git a/vendor/msmpeafowl/file_contexts b/vendor/msmpeafowl/file_contexts
index 2115acb2..1d8fd7ec 100644
--- a/vendor/msmpeafowl/file_contexts
+++ b/vendor/msmpeafowl/file_contexts
@@ -45,6 +45,7 @@
 /dev/block/platform/soc/1d84000.ufshc/by-name/frp                                u:object_r:frp_block_device:s0
 /dev/block/platform/soc/1d84000.ufshc/by-name/mdtp                               u:object_r:mdtp_device:s0
 /dev/block/platform/soc/1d84000.ufshc/by-name/dip                                u:object_r:dip_device:s0
+/dev/block/platform/soc/1d84000.ufshc/by-name/persist                            u:object_r:persist_block_device:s0
 
 #rawdump partition
 /dev/block/platform/soc/1d84000.ufshc/by-name/rawdump                            u:object_r:rawdump_block_device:s0
diff --git a/vendor/msmskunk/file_contexts b/vendor/msmskunk/file_contexts
index f88e3a1a..3dc75d7c 100644
--- a/vendor/msmskunk/file_contexts
+++ b/vendor/msmskunk/file_contexts
@@ -45,6 +45,7 @@
 /dev/block/platform/soc/1d84000.ufshc_mem/by-name/frp                                u:object_r:frp_block_device:s0
 /dev/block/platform/soc/1d84000.ufshc_mem/by-name/mdtp                               u:object_r:mdtp_device:s0
 /dev/block/platform/soc/1d84000.ufshc_mem/by-name/dip                                u:object_r:dip_device:s0
+/dev/block/platform/soc/1d84000.ufshc_mem/by-name/persist                            u:object_r:persist_block_device:s0
 
 #rawdump partition
 /dev/block/platform/soc/1d84000.ufshc_mem/by-name/rawdump                            u:object_r:rawdump_block_device:s0
diff --git a/vendor/qcs605/file_contexts b/vendor/qcs605/file_contexts
index a9945e6f..3039119f 100644
--- a/vendor/qcs605/file_contexts
+++ b/vendor/qcs605/file_contexts
@@ -49,6 +49,7 @@
 /dev/block/platform/soc/1d84000.ufshc/by-name/mdtp                               u:object_r:mdtp_device:s0
 /dev/block/platform/soc/1d84000.ufshc/by-name/dip                                u:object_r:dip_device:s0
 /dev/block/platform/soc/1d84000.ufshc/by-name/storsec                            u:object_r:boot_block_device:s0
+/dev/block/platform/soc/1d84000.ufshc/by-name/persist                            u:object_r:persist_block_device:s0
 
 #rawdump partition
 /dev/block/platform/soc/1d84000.ufshc/by-name/rawdump                            u:object_r:rawdump_block_device:s0
@@ -131,6 +132,7 @@
 /dev/block/platform/soc/7c4000.sdhci/by-name/mdtp                               u:object_r:mdtp_device:s0
 /dev/block/platform/soc/7c4000.sdhci/by-name/dip                                u:object_r:dip_device:s0
 /dev/block/platform/soc/7c4000.sdhci/by-name/storsec                            u:object_r:boot_block_device:s0
+/dev/block/platform/soc/7c4000.sdhci/by-name/persist                            u:object_r:persist_block_device:s0
 
 #rawdump partition
 /dev/block/platform/soc/7c4000.sdhci/by-name/rawdump                            u:object_r:rawdump_block_device:s0
diff --git a/vendor/sdm710/file_contexts b/vendor/sdm710/file_contexts
index 96b32a74..c3d48b74 100644
--- a/vendor/sdm710/file_contexts
+++ b/vendor/sdm710/file_contexts
@@ -50,6 +50,7 @@
 /dev/block/platform/soc/1d84000.ufshc/by-name/mdtp                               u:object_r:mdtp_device:s0
 /dev/block/platform/soc/1d84000.ufshc/by-name/dip                                u:object_r:dip_device:s0
 /dev/block/platform/soc/1d84000.ufshc/by-name/storsec                            u:object_r:boot_block_device:s0
+/dev/block/platform/soc/1d84000.ufshc/by-name/persist                            u:object_r:persist_block_device:s0
 
 #rawdump partition
 /dev/block/platform/soc/1d84000.ufshc/by-name/rawdump                            u:object_r:rawdump_block_device:s0
@@ -133,6 +134,7 @@
 /dev/block/platform/soc/7c4000.sdhci/by-name/mdtp                               u:object_r:mdtp_device:s0
 /dev/block/platform/soc/7c4000.sdhci/by-name/dip                                u:object_r:dip_device:s0
 /dev/block/platform/soc/7c4000.sdhci/by-name/storsec                            u:object_r:boot_block_device:s0
+/dev/block/platform/soc/7c4000.sdhci/by-name/persist                            u:object_r:persist_block_device:s0
 
 #rawdump partition
 /dev/block/platform/soc/7c4000.sdhci/by-name/rawdump                            u:object_r:rawdump_block_device:s0
-- 
2.17.1

