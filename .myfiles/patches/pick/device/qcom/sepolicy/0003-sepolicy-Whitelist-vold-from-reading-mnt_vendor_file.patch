From f3d3156291d6bb4c6137eb59ca9d0626019bd0e3 Mon Sep 17 00:00:00 2001
From: Michael Bestas <mkbestas@lineageos.org>
Date: Sun, 3 Feb 2019 23:33:24 +0200
Subject: [PATCH 3/5] sepolicy: Whitelist vold from reading mnt_vendor_file

* Allows vold to trim the persist partition

Change-Id: I7f69ec72fd72457e35072cb244a171bc59e71bfa
---
 vendor/common/domain.te | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/vendor/common/domain.te b/vendor/common/domain.te
index 3fcbc83e..8d8f8d23 100644
--- a/vendor/common/domain.te
+++ b/vendor/common/domain.te
@@ -27,7 +27,8 @@ neverallow {
     coredomain
     -init
     -ueventd
-    } vendor_persist_type: { dir file } *;
+    -vold
+} vendor_persist_type: { dir file } *;
 
 allow { domain - coredomain } mnt_vendor_file:lnk_file r_file_perms;
 
-- 
2.17.1

