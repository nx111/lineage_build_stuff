From 27144991f83312bdc64b0aaa3df7ac07e9af16f0 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?eray=20or=C3=A7unus?= <erayorcunus@gmail.com>
Date: Fri, 22 Mar 2019 01:15:45 +0300
Subject: [PATCH 37/45] SystemUI: Bring back lockscreen tuner (1/2)
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

* Enables us to change lockscreen shortcuts, but they will be disabled as default.
  (Leaving SystemUI/config.xml as it is makes this possible.)
* It will be located under Settings > Security & Location > Lock screen preferences

Change-Id: Ibb107e550ff492219fb6fedd63f8fc8ee89753a9
Signed-off-by: eray or√ßunus <erayorcunus@gmail.com>
---
 packages/SystemUI/LineageManifest.xml              | 14 ++++++++++++++
 .../com/android/systemui/tuner/TunerActivity.java  |  2 ++
 2 files changed, 16 insertions(+)

diff --git a/packages/SystemUI/LineageManifest.xml b/packages/SystemUI/LineageManifest.xml
index ce7adbfd808..2eb679c34c0 100644
--- a/packages/SystemUI/LineageManifest.xml
+++ b/packages/SystemUI/LineageManifest.xml
@@ -64,6 +64,20 @@
             </intent-filter>
         </activity-alias>
 
+        <activity-alias
+            android:name=".tuner.LockscreenFragment"
+            android:targetActivity=".tuner.TunerActivity"
+            android:icon="@drawable/tuner"
+            android:theme="@style/TunerSettings"
+            android:label="@string/tuner_lock_screen"
+            android:process=":tuner"
+            android:exported="true">
+            <intent-filter>
+                <action android:name="com.android.settings.action.LOCK_SCREEN_TUNER" />
+                <category android:name="android.intent.category.DEFAULT" />
+            </intent-filter>
+        </activity-alias>
+
         <activity-alias
             android:name=".tuner.TunerActivity"
             android:targetActivity=".tuner.TunerActivity"
diff --git a/packages/SystemUI/src/com/android/systemui/tuner/TunerActivity.java b/packages/SystemUI/src/com/android/systemui/tuner/TunerActivity.java
index de7caa24d3f..77f5d384bfe 100644
--- a/packages/SystemUI/src/com/android/systemui/tuner/TunerActivity.java
+++ b/packages/SystemUI/src/com/android/systemui/tuner/TunerActivity.java
@@ -50,6 +50,8 @@ public class TunerActivity extends SettingsDrawerActivity implements
                 fragment = new PowerNotificationControlsFragment();
             } else if ("com.android.settings.action.STATUS_BAR_TUNER".equals(action)) {
                 fragment = new StatusBarTuner();
+            } else if ("com.android.settings.action.LOCK_SCREEN_TUNER".equals(action)) {
+                fragment = new LockscreenFragment();
             } else {
                 fragment = new TunerFragment();
             }
-- 
2.17.1

