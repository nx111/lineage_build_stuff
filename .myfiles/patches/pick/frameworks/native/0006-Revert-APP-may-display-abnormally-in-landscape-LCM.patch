From fc7f5c345e16218035ec32734388288ad824c698 Mon Sep 17 00:00:00 2001
From: Luca Stefani <luca.stefani.ge1@gmail.com>
Date: Thu, 21 Mar 2019 09:59:35 +0100
Subject: [PATCH 06/20] Revert "APP may display abnormally in landscape LCM"

This reverts commit 1456a938f45fc71974e3a3df0140acc4fa6bacf0.

Change-Id: Ic4602f3668fc5885b4a036c6b6b42ce5edffb17f
---
 services/surfaceflinger/SurfaceFlinger.cpp | 6 ++----
 1 file changed, 2 insertions(+), 4 deletions(-)

diff --git a/services/surfaceflinger/SurfaceFlinger.cpp b/services/surfaceflinger/SurfaceFlinger.cpp
index 7d4d2f5d2..6fade9541 100644
--- a/services/surfaceflinger/SurfaceFlinger.cpp
+++ b/services/surfaceflinger/SurfaceFlinger.cpp
@@ -5083,8 +5083,7 @@ void SurfaceFlinger::renderScreenImplLocked(const RenderArea& renderArea,
     if (sourceCrop.width() == 0 || sourceCrop.height() == 0 || !sourceCrop.isValid()) {
         sourceCrop.setLeftTop(Point(0, 0));
         sourceCrop.setRightBottom(Point(raWidth, raHeight));
-    } else if (mPrimaryDisplayOrientation != DisplayState::eOrientationDefault &&
-               renderArea.getCaptureFill() != RenderArea::CaptureFill::CLEAR) {
+    } else if (mPrimaryDisplayOrientation != DisplayState::eOrientationDefault) {
         Transform tr;
         uint32_t flags = 0x00;
         switch (mPrimaryDisplayOrientation) {
@@ -5124,8 +5123,7 @@ void SurfaceFlinger::renderScreenImplLocked(const RenderArea& renderArea,
     engine.checkErrors();
 
     Transform::orientation_flags rotation = renderArea.getRotationFlags();
-    if (mPrimaryDisplayOrientation != DisplayState::eOrientationDefault &&
-        renderArea.getCaptureFill() != RenderArea::CaptureFill::CLEAR) {
+    if (mPrimaryDisplayOrientation != DisplayState::eOrientationDefault) {
         // convert hw orientation into flag presentation
         // here inverse transform needed
         uint8_t hw_rot_90  = 0x00;
-- 
2.17.1

