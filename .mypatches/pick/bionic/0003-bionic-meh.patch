From 6e9e3dac6bb43b5ae7ec1f1ef10b8cc9ee35056e Mon Sep 17 00:00:00 2001
From: LuK1337 <priv.luk@gmail.com>
Date: Sun, 12 Aug 2018 16:10:54 +0200
Subject: [PATCH 3/7] bionic: meh

Change-Id: Id59658bcf2468ff541d3d930a417c0cb6a30ccec
---
 libc/bionic/pthread_internal.cpp | 3 ++-
 libc/bionic/pthread_mutex.cpp    | 4 +++-
 2 files changed, 5 insertions(+), 2 deletions(-)

diff --git a/libc/bionic/pthread_internal.cpp b/libc/bionic/pthread_internal.cpp
index 829194cc7..de24b07a6 100644
--- a/libc/bionic/pthread_internal.cpp
+++ b/libc/bionic/pthread_internal.cpp
@@ -123,7 +123,8 @@ pthread_internal_t* __pthread_internal_find(pthread_t thread_id) {
       // TODO: try getting rid of this when Treble lets us keep vendor blobs on an old API level.
       async_safe_format_log(ANDROID_LOG_WARN, "libc", "invalid pthread_t (0) passed to libc");
     } else {
-      async_safe_fatal("invalid pthread_t %p passed to libc", thread);
+      (void)(thread);
+      // async_safe_fatal("invalid pthread_t %p passed to libc", thread);
     }
   }
   return nullptr;
diff --git a/libc/bionic/pthread_mutex.cpp b/libc/bionic/pthread_mutex.cpp
index 7f48972b1..8602d464a 100644
--- a/libc/bionic/pthread_mutex.cpp
+++ b/libc/bionic/pthread_mutex.cpp
@@ -790,7 +790,9 @@ static inline __always_inline bool IsMutexDestroyed(uint16_t mutex_state) {
 static int __attribute__((noinline)) HandleUsingDestroyedMutex(pthread_mutex_t* mutex,
                                                                const char* function_name) {
     if (bionic_get_application_target_sdk_version() >= __ANDROID_API_P__) {
-        __fortify_fatal("%s called on a destroyed mutex (%p)", function_name, mutex);
+        (void)(mutex);
+        (void)(function_name);
+        // __fortify_fatal("%s called on a destroyed mutex (%p)", function_name, mutex);
     }
     return EBUSY;
 }
-- 
2.17.1

